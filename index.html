<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Texas Watches Home</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Swiper CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
  <!-- Swiper JS -->
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
</head>
<body>
  <div class="topHeaderDiv">
    <div>Save Up to 90% Off * Free Shipping All Order.</div>
    <div class="dropdown">
      <button class="dropdown-toggle">My Account ▼</button>
      <div class="dropdown-content">
        <span class="close-btn" onclick="this.parentElement.style.display='none'">✕</span>
        <a href="login.html">Log In</a>
        <a href="createaccount.html">Register</a>
        <a href="login.html">My Account</a>
        <a href="shoppingcart.html">Shopping Cart</a>
      </div>
    </div>
  </div>

  <div class="headermid">
    <div class="headermidSecondDiv">
      <h1><a href="index.html" style="text-decoration: none; color: black;">Texas Watches</a></h1>
      <p class="headermidSecondDivSecondpara">Best Luxury Watches On Sale, Up To 90% Off. <br>
        Free Worldwide Shipping. Free Return - 30 Day Right To Return.</p>
    </div>
    <div class="header-icons">
      <div class="search-box">
        <input type="text" placeholder="Search..." id="searchInput">
        <button type="submit" onclick="filterProducts()"><i class="fas fa-search"></i></button>
      </div>
      <div class="cart-icon">
        <i class="fas fa-shopping-bag"></i>
        <span class="cart-count"><a href="shoppingcart.html" style="text-decoration: none;">0</a></span>
      </div>
    </div>
  </div>

  <div>
    <ul class="HeaderMenu">
      <li><a href="index.html" style="text-decoration: none; color: black;" onclick="filterByBrand('all'); return false;">HOME</a></li>
      <li><a href="rolex.html" style="text-decoration: none; color: black;">ROLEX</a></li>
      <li><a href="omega.html" style="text-decoration: none; color: black;">OMEGA</a></li>
      <li><a href="cartier.html" style="text-decoration: none; color: black;">CARTIER</a></li>
      <li><a href="patek-philippe.html" style="text-decoration: none; color: black;">PATEK PHILIPPE</a></li>
      <li><a href="breitling.html" style="text-decoration: none; color: black;">BREITLING</a></li>
    </ul>
  </div>

  <div class="swiper mySwiper">
    <div class="swiper-wrapper">
      <div class="swiper-slide"><img src="./images/slick01.jpg" alt="Slide 1"></div>
      <div class="swiper-slide"><img src="./images/slick02.jpg" alt="Slide 2"></div>
      <div class="swiper-slide"><img src="./images/slick03.jpg" alt="Slide 3"></div>
      <div class="swiper-slide"><img src="./images/slick04.jpg" alt="Slide 4"></div>
      <div class="swiper-slide"><img src="./images/slick05.jpg" alt="Slide 5"></div>
    </div>

    <!-- Navigation arrows -->
    <div class="swiper-button-next"></div>
    <div class="swiper-button-prev"></div>

    <!-- Pagination dots -->
    <div class="swiper-pagination"></div>
  </div>

  <!-- New Arrival Section -->
  <section class="new-arrivals">
    <h2 class="section-title">New Arrival</h2>
    <div id="loadingMessage" style="text-align: center; padding: 20px; font-size: 1.2rem; color: #666;">
      Loading products...
    </div>
    <div class="product-grid" id="productGrid">
      <!-- Products will be dynamically loaded here -->
    </div>
  </section>

  <!-- Font Awesome (for social and card icons) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <footer class="site-footer">
    <div class="footer-container">
      <div class="footer-column">
        <h4>OUR COMPANY</h4>
        <ul>
          <li><a href="about.html">About Us</a></li>
          <li><a href="shippingreturns.html">Shipping & Returns</a></li>
          <li><a href="privacypolicy.html">Privacy Policy</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h4>CUSTOMER SERVICE</h4>
        <ul>
          <li><a href="contactus.html">Contact Us</a></li>
          <li><a href="payment.html">Payment</a></li>
          <li><a href="sitemap.html">Site Map</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h4>MY ACCOUNT</h4>
        <ul>
          <li><a href="login.html">Log In</a></li>
          <li><a href="login.html">My Account</a></li>
          <li><a href="login.html">My Order</a></li>
          <li><a href="shoppingcart.html">Shopping Cart</a></li>
        </ul>
      </div>
      <div class="footer-icons">
        <div class="payment-icons">
          <img src="./images/payment_icons.png" alt="Visa">
        </div>
        <div class="social-icons">
          <i class="fa-brands fa-square-facebook" style="color: #ffffff;"></i>
          <i class="fa-brands fa-pinterest" style="color: #ffffff;"></i>
          <i class="fa-brands fa-google-plus" style="color: #ffffff;"></i>
          <i class="fa-brands fa-square-twitter" style="color: #ffffff;"></i>
          <i class="fa-brands fa-instagram" style="color: #ffffff;"></i>
        </div>
      </div>
    </div>
    <div class="footer-bottom">
      <p>Copyright © 2025 Texas Watches All Rights Reserved.</p>
    </div>
  </footer>

  <script>
    let productsData = [];
    let filteredProducts = [];
    let currentFilter = 'all';

    // Function to load products from JSON file
    async function loadProductsFromJSON() {
      try {
        const response = await fetch('products.json');
        if (!response.ok) {
          throw new Error('JSON file not found');
        }
        productsData = await response.json();
        filteredProducts = productsData.filter(product => product.page === 'home');
        renderProducts(filteredProducts);
      } catch (error) {
        console.error('Error loading products:', error);
        document.getElementById('loadingMessage').innerHTML = 'Error loading products. Please check if products.json exists.';
      }
    }

    // Function to create product HTML
    function createProductHTML(product) {
      return `
        <div class="product-card">
          <a href="product-detail.html?id=${product.id}">
            <img src="${product.image}" alt="${product.name}" />
            <div class="product-info">
              <h3 class="product-name">${product.name}</h3>
              <p class="product-price">
                <span class="old-price">${product.oldPrice.toLocaleString()}.00</span> 
                <span class="new-price">${product.newPrice.toLocaleString()}.00</span>
              </p>
            </div>
          </a>
        </div>
      `;
    }

    // Function to render products
    function renderProducts(products) {
      const productGrid = document.getElementById('productGrid');
      const loadingMessage = document.getElementById('loadingMessage');
      
      // Hide loading message
      loadingMessage.style.display = 'none';
      
      if (products.length === 0) {
        productGrid.innerHTML = '<div style="text-align: center; padding: 40px; font-size: 1.2rem; color: #666;">No products found.</div>';
        return;
      }
      
      productGrid.innerHTML = products.map(product => createProductHTML(product)).join('');
    }

    // Function to filter products by brand
    function filterByBrand(brand) {
      currentFilter = brand;
      
      if (brand === 'all') {
        filteredProducts = productsData.filter(product => product.page === 'home');
      } else {
        filteredProducts = productsData.filter(product => 
          product.brand === brand && (product.page === 'home' || product.page === brand)
        );
      }
      
      renderProducts(filteredProducts);
    }

    // Function to search products
    function filterProducts() {
      const searchTerm = document.getElementById('searchInput').value.toLowerCase();
      
      let searchResults = filteredProducts;
      
      if (searchTerm) {
        searchResults = filteredProducts.filter(product => 
          product.name.toLowerCase().includes(searchTerm) ||
          product.brand.toLowerCase().includes(searchTerm)
        );
      }
      
      renderProducts(searchResults);
    }

    // Function to handle product view (optional - for demo purposes)
    function viewProduct(productId) {
      // Redirect to product detail page
      window.location.href = `product-detail.html?id=${productId}`;
    }

    // Real-time search functionality
    document.getElementById('searchInput').addEventListener('input', function() {
      const searchTerm = this.value.toLowerCase();
      
      let searchResults = filteredProducts;
      
      if (searchTerm) {
        searchResults = filteredProducts.filter(product => 
          product.name.toLowerCase().includes(searchTerm) ||
          product.brand.toLowerCase().includes(searchTerm)
        );
      } else {
        searchResults = filteredProducts;
      }
      
      renderProducts(searchResults);
    });

    // Initialize Swiper
    function initializeSwiper() {
      const swiper = new Swiper('.mySwiper', {
        slidesPerView: 1,
        spaceBetween: 0,
        loop: true,
        autoplay: {
          delay: 5000,
          disableOnInteraction: false,
        },
        pagination: {
          el: '.swiper-pagination',
          clickable: true,
        },
        navigation: {
          nextEl: '.swiper-button-next',
          prevEl: '.swiper-button-prev',
        },
      });
    }

    // Initialize the page
    document.addEventListener('DOMContentLoaded', function() {
      loadProductsFromJSON();
      initializeSwiper();
      updateCartCount(); // Update cart count on page load
    });

    // Update cart count function
    function updateCartCount() {
      const cart = JSON.parse(localStorage.getItem('texasWatchesCart') || '[]');
      const count = cart.reduce((total, item) => total + item.quantity, 0);
      const cartCountElements = document.querySelectorAll('.cart-count a');
      cartCountElements.forEach(element => {
        element.textContent = count;
      });
    }
  </script>
  <script src="script.js"></script>  
</body>
</html>